<form>
  <div class="roll-for-me-config-container">
    <div class="roll-for-me-instructions">
      <p>{{localize "ROLLME.Config.InstructionsText"}}</p>
    </div>

    <div class="roll-for-me-sets-list">
      {{#each buttonSets}}
      <div class="roll-for-me-set-config {{#if expanded}}expanded{{/if}}" data-set-index="{{index}}">
        <div class="roll-for-me-set-header">
          <i class="toggle-icon fas {{#if expanded}}fa-chevron-down{{else}}fa-chevron-right{{/if}}"></i>
          <input type="text" name="buttonSets.{{index}}.name" value="{{name}}" placeholder="{{localize 'ROLLME.Config.SetNamePlaceholder'}}" class="roll-for-me-set-name-field">
          <div class="roll-for-me-set-controls">
            <button type="button" class="add-button" data-set-index="{{index}}" title="{{localize 'ROLLME.Config.AddButton'}}">
              <i class="fas fa-plus"></i>
            </button>
            <button type="button" class="delete-set" data-set-index="{{index}}" title="{{localize 'ROLLME.Config.DeleteSet'}}">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>

        <div class="set-content" {{#unless expanded}}style="display: none;"{{/unless}}>
          <div class="roll-for-me-buttons-list">
            {{#each buttons}}
            <div class="roll-for-me-button-config" data-set-index="{{../index}}" data-button-index="{{@index}}">
              <div class="roll-for-me-button-row">
                <input type="text" name="buttonSets.{{../index}}.buttons.{{@index}}.label" value="{{label}}" placeholder="{{localize 'ROLLME.Config.LabelPlaceholder'}}" class="roll-for-me-button-label">
                <div class="roll-for-me-button-actions">
                  <button type="button" class="delete-button" data-set-index="{{../index}}" data-button-index="{{@index}}" title="{{localize 'ROLLME.Config.DeleteButton'}}">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
              <div class="roll-for-me-command-row">
                <textarea name="buttonSets.{{../index}}.buttons.{{@index}}.command" placeholder="{{localize 'ROLLME.Config.CommandPlaceholder'}}" class="roll-for-me-button-command">{{command}}</textarea>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
      {{/each}}
    </div>

    <button type="button" id="add-set" class="roll-for-me-add-set-button">
      <i class="fas fa-plus"></i> {{localize "ROLLME.Config.AddSet"}}
    </button>
  </div>

  <footer class="roll-for-me-sheet-footer">
    <button type="submit" name="submit" class="roll-for-me-save-btn">
      <i class="fas fa-save"></i> {{localize "ROLLME.Config.Save"}}
    </button>
    <button type="button" name="close" class="roll-for-me-close-btn">
      <i class="fas fa-times"></i> {{localize "ROLLME.Config.Close"}}
    </button>
  </footer>
</form>